<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Project_1</title>

  
</head><body>
<big><big>Project 2: Gradient-Domain Fusion</big></big><br>

<big style="font-weight: bold;">Toy Problem:</big><br>

The reconstruction result is:<br>

<img style="width: 110px; height: 119px;" alt="toy" src="toy_example_reconstruction.png"><br>

The reconstruction error is 1.057e-13.<br>

The computed gradients for reconstruction is shown below (the left one
is for gradient in x direction and the right one is for gradient in y
direction):<br>

<img style="width: 110px; height: 119px;" alt="gx" src="toy_example_gx.png"><img style="width: 110px; height: 119px;" alt="gy" src="toy_example_gy.png"><br>

If I encourage v(1, 1) to be similar with s(1, 1) + 1 instead of s(1,
1), then the error becomes 114.4 which is roughly the square root of
the image size. This indicates that each pixel increases its value by
1, which proves that the gradient domain reconstruction is doing the
right thing.<br>

<br>

<span style="font-weight: bold;">Poisson Blending &amp; Mixed Gradients:<br>
</span>To test the correctness of the implementation, I tried a simple case:<br>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 534px;" alt="before" src="poisson_blend_before_test.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 534px;" alt="Poisson" src="poisson_blended_image_test.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 534px;" alt="mixed" src="mixed_blended_image_test.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>


<span style="font-weight: bold;"><br></span><span style="font-weight: bold;">Before Blending<br>
After Blending<br>
</span>The blending result looks okay at a glance. But when looking
carefully, the texture around the penguine looks different with the
texture on the target image and we can see some vague boundary on the
left side.<br>

<span style="font-weight: bold;"><br>
<img style="width: 800px; height: 531px;" alt="Poisson_1" src="poisson_blend_before_2.png">Before Blending<br>
<img style="width: 800px; height: 531px;" alt="Poisson_2" src="poisson_blended_image_2.png">After Blending</span><br>
<br>

<big style="font-weight: bold;">Discussion:</big><br>

I found that the border of each image causes a lot trouble, so I cut
off the border of each image (10%) to compute NCC scores based on only
the central part.<br>

<br>

<big style="font-weight: bold;">Extra Credit:</big><br>

<ul>

  <li>Automatic cropping: There are usually white borders surrounding
each image. So starting from the outmost line, I cut off a line if the
minimum gray scale is larger than 200. The process stops once a line
does not meet the criteria. I repeat this process for all four
directions (up, bottom, left, and right). The result is as follows:</li>
</ul>

<img style="width: 1434px; height: 490px;" alt="automatic_cropping" src="automatic_cropping.jpg"> <br>

<ul>

  <li>Automatic contrasting: I apply the histeq function to each
channel and get results with more constrast:</li>
</ul>

<img style="width: 1440px; height: 516px;" alt="automatic_contrasting" src="automatic_contrasting.jpg"><br>

<ul>

  <li>I explored a little bit about better color mapping and find that
multiplying 0.9 to red and green channels for this image leads to
slightly better result (the person looks more lively):</li>
</ul>

<img style="width: 1439px; height: 504px;" alt="better_color_mapping" src="better_color_mapping.jpg"><br>

<ul>

  <li>I also tried using gradients and edges for alignment. I use Sobel
filtering for computing
gradients and Laplacian filtering for computing edges. While I didn't
observe much improvement as the alignment based on color metrics is
already pretty good.</li>
</ul>

<img style="width: 1436px; height: 524px;" alt="gradients" src="gradients.jpg"><br>

<img style="width: 1440px; height: 513px;" alt="edges" src="edges.jpg"><br>

<br>
</body></html>