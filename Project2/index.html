<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Project_2</title>

  
</head><body>
<big><big>Project 2: Gradient-Domain Fusion</big></big><br>

<big style="font-weight: bold;">Toy Problem:</big><br>

The reconstruction result is:<br>

<img style="width: 110px; height: 119px;" alt="toy" src="toy_example_reconstruction.png"><br>

The reconstruction error is 1.057e-13.<br>

The computed gradients for reconstruction is shown below (the left one
is for gradient in x direction and the right one is for gradient in y
direction):<br>

<img style="width: 110px; height: 119px;" alt="gx" src="toy_example_gx.png"><img style="width: 110px; height: 119px;" alt="gy" src="toy_example_gy.png"><br>

If I encourage v(1, 1) to be similar with s(1, 1) + 1 instead of s(1,
1), then the error becomes 114.4 which is roughly the square root of
the image size. This indicates that each pixel increases its value by
1, which proves that the gradient domain reconstruction is doing the
right thing.<br>

<br>

<span style="font-weight: bold;">Poisson Blending &amp; Mixed Gradients:<br>
</span>To test the correctness of the implementation, I tried a simple
case:<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 534px;" alt="naive" src="naive_blend_test.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 534px;" alt="Poisson" src="poisson_blended_image_test.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 534px;" alt="mixed" src="mixed_blended_image_test.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">Naive
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Poisson
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Mixed
Gradients<br>
      </td>
    </tr>
  </tbody>
</table>

As shown in this example, the Poisson blending looks okay and the mixed
gradients blending looks more natural. Because the source region has
constant color around the text, the Poisson blending result has has
consistent color around the text. But the mixed gradients blending
result has texture similar to the background around the text.<br>

<br>

The penguin example:<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 528px; height: 704px;" alt="naive" src="naive_blend_penguin.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 528px; height: 704px;" alt="Poisson" src="poisson_blended_image_penguin.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 528px; height: 704px;" alt="mixed" src="mixed_blended_image_penguin.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">Naive
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Poisson
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Mixed
Gradients<br>
      </td>
    </tr>
  </tbody>
</table>

Poisson blending works well but we can still see some artifact if
looking carefully. The mixed gradients blending works better.<br>

<br>

The penguin comes to our campus:<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 1000px; height: 563px;" alt="naive" src="naive_blend_penguin_again.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 1000px; height: 563px;" alt="Poisson" src="poisson_blended_image_penguin_again.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 1000px; height: 563px;" alt="mixed" src="mixed_blended_image_penguin_again.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">Naive
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Poisson
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Mixed
Gradients<br>
      </td>
    </tr>
  </tbody>
</table>

Results look similar with the previous one.<br>

<br>

The plane example:<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 531px;" alt="naive" src="naive_blend_plane.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 531px;" alt="Poisson" src="poisson_blended_image_plane.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 531px;" alt="mixed" src="mixed_blended_image_plane.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">Naive
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Poisson
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Mixed
Gradients<br>
      </td>
    </tr>
  </tbody>
</table>

Both Poisson blending and mixed gradients blending work reasonably but
they make the plane look too blue. This is because the background is
more blue than the source region and the plane becomes more blue to
minimize the gradient change.<br>

<br>

The seagull example:<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 400px;" alt="naive" src="naive_blend_seagull.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 400px;" alt="Poisson" src="poisson_blended_image_seagull.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 400px;" alt="mixed" src="mixed_blended_image_seagull.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">Naive
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Poisson
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Mixed
Gradients<br>
      </td>
    </tr>
  </tbody>
</table>

The result and reasoning is similar to the previous one.<br>

<br>

A failure case:<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 600px;" alt="naive" src="naive_blend_rabbit.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 600px;" alt="Poisson" src="poisson_blended_image_rabbit.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 800px; height: 600px;" alt="mixed" src="mixed_blended_image_rabbit.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">Naive
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Poisson
Blending<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Mixed
Gradients<br>
      </td>
    </tr>
  </tbody>
</table>

This case fails because the target image has high frequency texture
while the foreground object doesn't, which is the opposite of the ideal
condition. The Poisson blending is not so bad but the mixed gradients
blending fails miserably because the gradients of the target image is
preserved.<br>

<br>

I think results of mixed gradients blending usually looks more natural
in the region surrounding the foreground object. But the danger of
mixed gradients blending is that the appearance of the foreground
object might be affected by the texture of the target image.<br>

<span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><br>

<span style="font-weight: bold;">Color2Gray:<br>
</span>The reconstruction result of the given example:<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 128px; height: 125px;" alt="color" src="samples/colorBlindTest35.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 128px; height: 125px;" alt="naive" src="gray_image_naive_35.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 128px; height: 125px;" alt="gradient" src="gray_image_gradient_35.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">RGB Image<br>
      </td>
      <td style="vertical-align: top; text-align: center;">rgb2gray<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Gradient-domain
Processing<br>
      </td>
    </tr>
  </tbody>
</table>

The number in the gradient-domain processing result is clear.<br>

<br>

Another example:<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; width: 33%;"><img style="width: 400px; height: 63px;" alt="color" src="text.jpg"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 400px; height: 63px;" alt="naive" src="gray_image_naive_text.png"><br>
      </td>
      <td style="vertical-align: top; width: 33%;"><img style="width: 400px; height: 63px;" alt="gradient" src="gray_image_gradient_text.png"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">RGB Image<br>
      </td>
      <td style="vertical-align: top; text-align: center;">rgb2gray<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Gradient-domain
Processing<br>
      </td>
    </tr>
  </tbody>
</table>

The gradient-domain processing result has more contrast.<br>

<br>

</body></html>
